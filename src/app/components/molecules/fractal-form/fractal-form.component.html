<button
  type="button"
  (click)="fs.selectedChildrenForms.toggle(fractal)"
  [class.selected]="fs.selectedChildrenForms.has(fractal)">
  <form>
    <app-card [title]="isNewFractal ? 'New' : title">
      @for (indicator of dataSource; track indicator) {
        @if (fractal.controls.get(indicator); as control) {
          @let dataForm = control.getFromControl('data');
          @switch (control.dto.input) {
            @case (ControlInputs.Select) {
              <app-select
                [label]="indicator"
                [opts]="fractal.controls.getAndSplitControlData([indicator])"
                [form]="dataForm" />
            }
            @default {
              <app-input [label]="indicator" [form]="dataForm" />
            }
          }
        }
      }
    </app-card>
  </form>
</button>
