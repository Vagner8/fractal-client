@let showModifiersTaps = ss.$showModifiersTaps();
@let selectedParent = fs.selectedParent.$value();
@let current = showModifiersTaps ? ss.modifiers : selectedParent;

<mat-drawer-container class="mat-drawer-container-app-sidenav" autosize>
  <mat-drawer
    [opened]="ss.$managerEvent() === AppEvents.TOUCH"
    [disableClose]="false"
    class="mat-drawer-app-sidenav"
    mode="side"
    position="end">
    <div>
      @if (current) {
        @for (cursor of current.getStringsData('Oc'); track $index) {
          @if (current.findChild(cursor); as child) {
            @if (child.findControl('Oc') || showModifiersTaps) {
              <app-tap
                [$fractal]="child"
                (hold)="showModifiersTaps ? onModifierHold(child) : onHold(child)"
                (touch)="showModifiersTaps ? onModifierTouch(child) : onTouch(child)"/>
            }
          }
        }
      }
      <!-- @if (!showModifiersTaps && selectedParent?.parent; as parent) {
        <app-tap [$title]="backButton?.getString('Name')" [$fractal]="backButton" (touch)="onTouch(parent)"/>
      } -->
    </div>
  </mat-drawer>
  <router-outlet />
</mat-drawer-container>
